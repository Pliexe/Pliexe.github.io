import{M as e,S as t,a as o,V as n,A as r,B as a,b as s,c as i,G as l,d as h,P as m,W as p,T as d,L as c,e as w,f as g,g as u,F as v,h as x,i as S,j as y,C as f,k as C,l as b}from"./vendor.d93f3c21.js";var z="varying vec2 vertexUV;varying vec3 vertexNormal;void main(){vertexUV=uv;vertexNormal=normalize(normalMatrix*normal);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",M="uniform sampler2D globeTexture;uniform vec3 globeAtmosphere;varying vec2 vertexUV;varying vec3 vertexNormal;void main(){float intensity=1.05-dot(vertexNormal,vec3(0.0,0.0,1.0));vec3 atmosphere=globeAtmosphere*pow(intensity,1.5);gl_FragColor=vec4(atmosphere+texture2D(globeTexture,vertexUV).xyz,1.0);}",A="varying vec3 vertexNormal;void main(){vertexNormal=normalize(normalMatrix*normal);gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.0);}",P="uniform vec4 globeAtmosphere;uniform float atmosphereIntensity;varying vec3 vertexNormal;void main(){float intensity=pow(atmosphereIntensity-dot(vertexNormal,vec3(0,0,1.0)),2.0);gl_FragColor=globeAtmosphere*intensity;}";const I=(e,t,o)=>{const n=t*Math.PI/180;return`translateX(${(e+o)*Math.cos(n)}px) translateY(${e*Math.sin(n)}px)`},N=document.getElementsByClassName("projectPreview"),T=360/N.length;for(let R=0;R<N.length;R++)N[R].style.transform=I(window.innerHeight/2-100,R*T,window.innerWidth>1100?window.innerWidth/2-600:0),N[R].innerText=R*T+"deg";const j=new h,V=new m(40,window.innerWidth/window.innerHeight,.1,1e3);V.position.z=40;const F=new p({canvas:document.querySelector("#bgCanvas"),antialias:!0});F.setPixelRatio(window.devicePixelRatio),F.setSize(window.innerWidth,window.innerHeight),F.render(j,V);const H=(new d).load("images/earth.jpg");H.minFilter=c;const W=new class{constructor(h,m){var p;this.planet=new e(new t(m.radius,m.widthSegments,m.heightSegments),new o({vertexShader:z,fragmentShader:M,uniforms:{globeAtmosphere:{value:null==m.atmosphereColor?new n(.3,.6,1):new n(m.atmosphereColor.x,m.atmosphereColor.y,m.atmosphereColor.z)},globeTexture:{value:m.texture}}})),this.atmosphere=new e(new t(m.radius,m.widthSegments,m.heightSegments),new o({vertexShader:A,fragmentShader:P,blending:r,side:a,uniforms:{globeAtmosphere:{value:null==m.atmosphereColor?new s(.3,.6,1,1):new s(m.atmosphereColor.x,m.atmosphereColor.y,m.atmosphereColor.z,m.atmosphereColor.w)},atmosphereIntensity:{value:null!=(p=m.atmosphereIntensity)?p:.6}}})),this.clouds=new e(new t(m.radius+.05,m.widthSegments,m.heightSegments),new i({map:m.cloudsTexture,transparent:!0})),"number"==typeof m.atmosphereScale?this.atmosphere.scale.set(m.atmosphereScale,m.atmosphereScale,m.atmosphereScale):(null==m.atmosphereScale&&(m.atmosphereScale={x:1.1,y:1.1,z:1.1}),this.atmosphere.scale.set(m.atmosphereScale.x,m.atmosphereScale.y,m.atmosphereScale.z)),this.group=new l,this.group.add(this.clouds),this.group.add(this.planet),this.group.add(this.atmosphere),h.add(this.group)}}(j,{radius:5,widthSegments:50,heightSegments:50,atmosphereIntensity:.3,atmosphereScale:1.1,texture:H,cloudsTexture:(new d).load("images/clouds.png")});W.group.position.x=8,W.planet.rotation.y=2,W.planet.rotation.x=.2;const E=new w(16777215,.5);j.add(E);const U=new g,$=new u({color:16777215}),_=[];for(let R=0;R<1e4;R++){const e=2e3*(Math.random()-.5),t=2e3*(Math.random()-.5),o=2e3*(Math.random()-.5);_.push(e,t,o)}U.setAttribute("position",new v(_,3));const k=new x(U,$);j.add(k);(new d).load("images/smoke.png",(t=>{const o=new S(500,500),n=new y({map:t,transparent:!0,color:3346818});for(let r=0;r<50;r++){const t=new e(o,n);t.position.set(800*Math.random()-400,500,500*Math.random()-500),t.rotation.x=1.16,t.rotation.y=-.12,t.rotation.z=2*Math.random()*Math.PI,t.material.opacity=1,j.add(t)}}));const X=(new d).load("images/moon.jpg"),Y=new class{constructor(i,h){var m;this.planet=new e(new t(h.radius,h.widthSegments,h.heightSegments),new o({vertexShader:z,fragmentShader:M,uniforms:{globeAtmosphere:{value:null==h.atmosphereColor?new n(.3,.6,1):new n(h.atmosphereColor.r,h.atmosphereColor.g,h.atmosphereColor.b)},globeTexture:{value:h.texture}}})),this.atmosphere=new e(new t(h.radius,h.widthSegments,h.heightSegments),new o({vertexShader:A,fragmentShader:P,blending:r,side:a,uniforms:{globeAtmosphere:{value:null==h.atmosphereColor?new s(.3,.6,1,1):new s(h.atmosphereColor.r,h.atmosphereColor.g,h.atmosphereColor.b,h.atmosphereColor.o)},atmosphereIntensity:{value:null!=(m=h.atmosphereIntensity)?m:.6}}})),"number"==typeof h.atmosphereScale?this.atmosphere.scale.set(h.atmosphereScale,h.atmosphereScale,h.atmosphereScale):(null==h.atmosphereScale&&(h.atmosphereScale={x:1.1,y:1.1,z:1.1}),this.atmosphere.scale.set(h.atmosphereScale.x,h.atmosphereScale.y,h.atmosphereScale.z)),this.group=new l,this.group.add(this.planet),this.group.add(this.atmosphere),i.add(this.group)}}(j,{radius:2,widthSegments:50,heightSegments:50,atmosphereIntensity:.5,atmosphereScale:1.1,atmosphereColor:{r:1,g:1,b:1,o:1},texture:X});Y.group.position.x=8,Y.group.position.y=-20,Y.group.position.z=-6;const q=new f(new n(0,0,5),new n(0,0,-5),new n(4,0,-6),new n(6,0,-6)),B=new f(new n(6,0,-6),new n(8,0,-6),new n(8,-5,-6),new n(8,-10,-6)),D=q.getPoints(400).concat(B.getPoints(400));[q.v0,q.v1,q.v2,q.v3].forEach((o=>{const n=new t(.2,10,10),r=new e(n,new i({color:"0x255"}));r.position.x=o.x,r.position.y=o.y,r.position.z=o.z,j.add(r)})),[B.v0,B.v1,B.v2,B.v3].forEach((o=>{const n=new t(.2,10,10),r=new e(n,new i({color:"0x255"}));r.position.x=o.x,r.position.y=o.y,r.position.z=o.z,j.add(r)})),console.log(D);const L=new b((new g).setFromPoints(D),new C({color:16711680}));j.add(L),window.addEventListener("scroll",(()=>{const e=window.pageYOffset/(document.body.scrollHeight-window.innerHeight),t=Math.round(e*(D.length-1));V.position.x=D[t].x,V.position.y=D[t].y,V.position.z=D[t].z,t<D.length-2&&V.lookAt(D[t+1]),console.log(`scrollY: ${100*e}%. index: ${t}`)})),function e(){requestAnimationFrame(e),F.render(j,V),W.planet.rotation.y+=4e-4,W.clouds.rotation.y+=5e-4,U.rotateX(1e-4),U.rotateX(8e-5)}();
